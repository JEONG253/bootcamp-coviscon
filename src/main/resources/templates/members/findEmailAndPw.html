<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}" lang="ko">

<div layout:fragment="content">
  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section class="breadcrumbs">
      <div class="container">
        <ol>
          <li><a th:href="${@environment.getProperty('prefix.url')} + 'member/findEmailAndPw'">아이디(이메일)/비밀번호 찾기</a></li>
        </ol>
        <h2>아이디(이메일)/비밀번호 찾기</h2>
      </div>
    </section><!-- End Breadcrumbs -->

    <section id="join" class="join d-flex align-items-center">
      <div class="container">
        <div class="input-form-backgroud row">
          <div class="input-form col-md-12 mx-auto">
            <h4 class="fw-bolder text-center">아이디(이메일) 찾기</h4>

            <!-- 아이디 찾기 -->
            <div class="mb-4">
              <label for="nickname1">닉네임</label>
              <div class="input-group">
                <input type="text" class="form-control" id="nickname1" name="nickname">
              </div>
            </div>
            <button type="button" onclick="findEmail()" class="btn btn-primary mx-2">아이디(이메일) 찾기</button>
            <hr>

            <!-- 비밀번호 찾기 -->
            <h4 class="fw-bolder text-center">비밀번호 찾기</h4>
            <div class="mb-4">
              <label for="emails">아이디(이메일)</label>
              <div class="input-group">
                <input type="text" class="form-control" id="emails" name="email">
              </div>
            </div>
            <div class="mb-4">
              <label for="nickname2">닉네임</label>
              <div class="input-group">
                <input type="text" class="form-control" id="nickname2" name="nickname">
              </div>
            </div>
            <button type="button" onclick="findPassword()" class="btn btn-primary mx-2">비밀번호 찾기</button>

          </div>
        </div>
      </div>
      <script>
        var memberUrl = "[[${@environment.getProperty('prefix.url')}]]";
        function findEmail() {
          var nicknameInput = document.getElementById("nickname1");
          if (nicknameInput) {
            var nickname = nicknameInput.value;
            var url = memberUrl + 'member/findEmail?nickname=' + encodeURIComponent(nickname);
            window.location.href = url;
          } else {
            console.error("Nickname input not found");
          }
        }

        function findPassword() {
          var emailInput = document.getElementById("emails");
          var nicknameInput = document.getElementById("nickname2");

          console.log(emailInput)
          console.log(nicknameInput)

          if (emailInput && nicknameInput) {
            var email = emailInput.value;
            var nickname = nicknameInput.value;

            console.log(email)
            console.log(nickname)

            if (email && nickname) {
              var url = memberUrl + 'member/findPassword?email=' + encodeURIComponent(email) + '&nickname=' + encodeURIComponent(nickname);
              window.location.href = url;
            } else {
              console.error("Email and Nickname cannot be empty");
            }
          } else {
            console.error("Email and Nickname input not found");
          }
        }
      </script>
    </section>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center">
      <i class="bi bi-arrow-up-short"></i>
    </a>
  </main>
</div>
</html>
